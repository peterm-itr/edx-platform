<%! import json %>
<%! from student.models import anonymous_id_for_user %>
<%! from edxnotes.helpers import get_id_token %>
<%
    if user:
        params.update({
            'user': anonymous_id_for_user(user, None),
            'token': get_id_token(user),
            })
%>
<div id="edx-notes-wrapper-${uid}" class="edx-notes-wrapper">
    <div class="edx-notes-wrapper-content">${content}</div>
</div>
<script type="text/javascript">
    (function (require) {
        require(['js/edxnotes/views/notes_factory'], function (Notes) {
            var element = document.getElementById('edx-notes-wrapper-${uid}');
            Notes.factory(element, ${json.dumps(params)});
        });
    }).call(this, require || RequireJS.require);
</script>
